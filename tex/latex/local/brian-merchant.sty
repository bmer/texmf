% make numbering start from 0
%\def\@arabic#1{\the\numexpr(#1)-1\relax} 
%\def\@roman#1{\romannumeral\numexpr(#1)-1\relax}
%\def\@Roman#1{\expandafter\@slowromancap\romannumeral\numexpr(#1)-1\relax@}

\usepackage{authblk}
\renewcommand\Affilfont{\scriptsize}
%\usepackage{ccfonts}
\usepackage{minted} % making nicely coloured code snippets
\usepackage{amsmath} % AMS mathmode stuff
\usepackage{amsthm}
\usepackage{amssymb}
\usepackage{physics} % for writing derivatives, norms, evaluation symbols, and so on
\usepackage{graphicx} % put in figures
\usepackage{hyperref} % hyper-referencing/link capabilities in PDF
%\usepackage{gensymb}
\usepackage[version=3]{mhchem} % easy chemical formula notation
\usepackage{siunitx} % SI units
%\usepackage{marginnote} % put notes in the margin, if necessary
%\let\labelindent\relax
\usepackage{enumitem} % refine enumerate
\usepackage[margin=1in]{geometry} % control size of margins
\usepackage{relsize} % change size of stuff relative to other stuff
%\usepackage[framemethod=TikZ]{mdframed} % noteboxes, boxes, etc.
\usepackage{esdiff} % easy differential equations in mathmode
\usepackage{mathtools} % mathclap etc.
\usepackage{listings} % allow pretty formatting of stuff that needs pretty formatting
%\usepackage{matlab-prettifier} % allow pretty formatting of MATLAB code
%\lstMakeShortInline[style=Matlab-editor]"
%\usepackage{pdfrender} % darken font, "printing press effect"
\usepackage{xargs} % Use more than one optional parameter in a new commands
\usepackage{xcolor} % Coloured text etc.
\usepackage{cancel} % text or math cancellation slashes
\usepackage{xparse} % flexible doc cmds (example, more than one optional argument)
%\usepackage[colorinlistoftodos,prependcaption,textsize=tiny]{todonotes} % put in todo notes
\usepackage{xifthen} % use nice if-then-else statements inside forloops (handy for drawing diagrams using TikZ)
%\usepackage{textcomp} % for the cent symbol
\usepackage{bm} % bold math symbols
\usepackage{upgreek}
\usepackage{stackengine} % stacking glyphs one on top of the other
%\usepackage{tcolorbox}
\usepackage{calc} % doing arithmetic within macros
\usepackage{xstring} % conditional cases in macros
%\usepackage{csquotes}
\usepackage[sorting=none, maxbibnames=99]{biblatex}
%\usepackage{dsfont} % double stroke fonts, e.g. for writing "blackboard font" digits
%\usepackage{bbm}
%\usepackage{parskip} % remove auto-indentation of paragraphs with \setlength{\parindent}{0pt}
%\usepackage[font={small}]{caption}
%\usepackage{breqn}
%\usepackage{MnSymbol}
\usepackage{subcaption} %https://tex.stackexchange.com/questions/181225/how-to-reference-to-subfigure-in-latex
\usepackage{cleveref} % https://tex.stackexchange.com/questions/181225/how-to-reference-to-subfigure-in-latex
\captionsetup[subfigure]{subrefformat=simple,labelformat=simple}
\renewcommand\thesubfigure{(\alph{subfigure})}
% ====================================
\newcommand*{\lfrac}[2]{{#1}/{#2}}
\newcommand*{\lbigfrac}[2]{{#1}\Big/{#2}}
% ====================================

% uses mathtools package
\DeclarePairedDelimiter\ceil{\lceil}{\rceil}
\DeclarePairedDelimiter\floor{\lfloor}{\rfloor}

\newcommandx{\unsure}[2][1=]{\todo[linecolor=red,backgroundcolor=red!25,bordercolor=red,#1]{#2}}
\newcommandx{\change}[2][1=]{\todo[linecolor=blue,backgroundcolor=blue!25,bordercolor=blue,#1]{#2}}
\newcommandx{\info}[2][1=]{\todo[linecolor=OliveGreen,backgroundcolor=OliveGreen!25,bordercolor=OliveGreen,#1]{#2}}
\newcommandx{\improvement}[2][1=]{\todo[linecolor=Plum,backgroundcolor=Plum!25,bordercolor=Plum,#1]{#2}}

% macro to number specific equations in align* environment
% usage: <equation> /numberthis /label{some-label}
\newcommand\numberthis{\addtocounter{equation}{1}\tag{\theequation}}

\def\SP#1{\textsuperscript{#1}}
\def\SB#1{\textsubscript{#1}}
\def\SPSB#1#2{\rlap{\textsuperscript{#1}\textsubscript{#2}}}

%%===========================
%\newcommand{\definebox}[2]{%
%    \newcounter{#1}
%    \newenvironment{#1}[1][]{%
%        \stepcounter{#1}%
%        \mdfsetup{%
%            frametitle={%
%                \tikz[]
%                \node[rectangle,fill=white]
%                {\strut \MakeUppercase#1~\csname the#1\endcsname\ifstrempty{##1}{}{:~##1}};}}%
%        \mdfsetup{innertopmargin=1pt,linecolor=#2,%
%            linewidth=1pt,topline=true,
%            frametitleaboveskip={\dimexpr -1.2\ht\strutbox\relax},}%
%        \begin{mdframed}[]\relax%
%        }{\end{mdframed}}%
%}


\theoremstyle{plain}
\theoremstyle{definition}
\newtheorem{axiom}{Axiom}
\newtheorem{taggedaxiomx}{Axiom}
\newenvironment{taggedaxiom}[1]
 {\renewcommand\thetaggedaxiomx{#1}\taggedaxiomx}
 {\endtaggedaxiomx}
%\definebox{axiom}{black}
%\definebox{fundament}{black}
%\newtheorem{fundament}{Fundament}
%\newtheorem{taggedfundamentx}{Fundament}
%\newenvironment{taggedfundament}[1]
%{\renewcommand\thetaggedfundamentx{#1}\taggedfundamentx}
%{\endtaggedfundamentx}
\newtheorem{algorithm}{Algorithm}

%\newtheorem{fsignature}{Signature}
%\newtheorem{taggedsignaturex}{Signature}
%\newenvironment{taggedsignature}[1]
%{\renewcommand\thetaggedsignaturex{#1}\taggedsignaturex}
%{\endtaggedsignaturex}


\newtheorem{definition}{Definition}
%\definebox{definition}{black}

%\newtheorem{conjecture}{Conjecture}

%\newtheorem*{example}{Example}

%\newtheorem{exercise}{Exercise}

%\newtheorem{algorithm}{Algorithm}

\newtheorem*{remark}{Remark}

%\newtheorem*{fact}{Fact}

\newtheorem{theorem}{Theorem}
\newtheorem{taggedtheoremx}{Theorem}
\newenvironment{taggedtheorem}[1]
{\renewcommand\thetaggedtheoremx{#1}\taggedtheoremx}
{\endtaggedtheoremx}

%\definebox{theorem}{black}
%\definebox{proposition}{black}
%\definebox{lemma}{black}
%\definebox{corollary}{black}

\newtheorem{proposition}{Proposition}
\newtheorem{lemma}{Lemma}
\newtheorem*{corollary}{Corollary}
%
%\theoremstyle{remark}
%\newtheorem*{note}{Note}
%\newtheorem{case}{Case}


\newenvironment{solution}
{\renewcommand\qedsymbol{$\blacksquare$}\begin{proof}[Solution]}
	{\end{proof}}


%======================================


\newenvironment{indenttext}{%
	\par%
	\medskip
	\leftskip=4em\rightskip=2em%
	\noindent\ignorespaces}{%
	\par\medskip}

%======================================

% make operators with various sizes
\newcommand*{\scaleandcenter}[2]{{\vcenter{\hbox{\scalebox{#1}{$#2$}}}}}
\newcommand*{\scalebig}[1]{\scaleandcenter{1.5}{#1}}
\newcommand*{\scalesmall}[1]{\scaleandcenter{0.5}{#1}}

% function application
\newcommand*{\apf}{\mathrel{\triangleleft}}
\newcommand*{\fpa}{\mathrel{\triangleright}}


%======================================

\newcommand*{\et}{\mathbin{\wedge}}
\newcommand*{\vel}{\mathbin{\vee}}
\newcommand*{\xvel}{\mathbin{\veebar}}

\newcommand*{\imp}{\mathbin{\Rightarrow}}
\newcommand*{\pmi}{\mathbin{\Leftarrow}}

% precedence level 1
%\declareopmult\+{0.5}{+}
%\declareopmult\mi{1}{-}

%precedence level 2
%\declareopmult\eqp{2}{=}
%\declareopmult\leqp{2}{\leq}
%\declareopmult\geqp{2}{\geq}

% precedence level 3
%\declareopmult\et{3}{\wedge}

% precedenve level 4
%\declareopmult\vel{4}{\vee}

% precedenve level 5
%\declareopmult\equivp{5}{\equiv}

% precedence level 6
%\declareopmult\imp{6}{\Rightarrow}
%\declareopmult\pmi{6}{\Leftarrow}

%============ FMSD MACROS =============
% macros for unified programming and math notations
% needs amsmath package

\newcommand*{\sclr}[1]{\ensuremath{\;\;#1\;\;}}
\newcommand*{\bclr}[1]{\ensuremath{\quad#1\quad}}

% some common sets: nat, xnat, int, xint, rat, xrat
\newcommand*{\bins}{\texttt{bins}}
\newcommand*{\nats}{\texttt{nats}}
\newcommand*{\xnat}{\texttt{xnats}}
\newcommand*{\ints}{\texttt{ints}}
\newcommand*{\xints}{\texttt{xints}}
\newcommand*{\rats}{\texttt{rats}}
\newcommand*{\xrat}{\texttt{xrats}}
\newcommand*{\reals}{\texttt{reals}}
\newcommand*{\emptybunch}{\texttt{null}}
\newcommand*{\struct}{\texttt{structs}}
\newcommand*{\binstruct}{\texttt{binstructs}}
\newcommand*{\strings}{\texttt{strings}}

% everywhere command
\newcommand*{\everywhere}[1]{[#1]}
\newcommand*{\Everywhere}[1]{[\;#1\;]}
\newcommand*{\Starteverywhere}{\scalebig{[}}
\newcommand*{\Endeverywhere}{\scalebig{]}}
% 0 \bto 3 = 0,..3
% (b stands for bunch)
\newcommand*{\bto}{\mathord{,}..}
% 0 \sto 3 = 0;..3
% (s stands for string)
\newcommand*{\sto}{\mathord{;}..}

% the | in "n -> i | L"
\newcommand*{\ow}{\mid}

% dependent composition P.Q
\newcommand*{\dc}{\mathrel{.}}

% ok
\newcommand*{\ok}{\mathit{ok}}

% :=
\newcommand*{\get}{\mathpunct{:=}}

% if-then-else
\newcommand*{\cond}[3]{\mbox{\textbf{if} $#1$ \textbf{then} $#2$ \textbf{else} $#3$ \textbf{fi}}}
% if-then on a line, else on another
\newcommand*{\condb}[3]{\begin{array}[t]{@{}l}\mbox{\textbf{if} $#1$ \textbf{then} $#2$} \\ \mbox{\textbf{else} $#3$ \\ \mbox{\textbf{fi}}}\end{array}}
% if c then
%   stuff
% else
%   fluff
\newcommand*{\condbb}[3]{\begin{array}[t]{@{}l}\mbox{\textbf{if} $#1$ \textbf{then}} \\ \quad #2 \\ \mbox{\textbf{else}} \\ \quad #3 \\ \mbox{\textbf{fi}} \end{array}}

% while-do
\newcommand*{\while}[2]{\mbox{\textbf{while} $#1$ \textbf{do} $#2$}}
% while-b-do on one line, body on next
\newcommand*{\whileb}[2]{\begin{array}[t]{@{}l}\mbox{\textbf{while} $#1$ \textbf{do}} \\ \quad #2 \end{array}}

\newcommand{\bequiv}{\Leftrightarrow}

% some common enlarged relation symbols
\newcommand*{\In}{\mathrel{\scalebig{\in}}}
\newcommand*{\Et}{\mathbin{\scalebig{\et}}}
\DeclareMathOperator{\Biget}{\Et}
\newcommand*{\Vel}{\mathbin{\scalebig{\vel}}}
\DeclareMathOperator{\Bigvel}{\Vel}
\newcommand*{\Eq}{\mathrel{\scalebig{=}}}
\newcommand*{\Approx}{\mathrel{\scalebig{\approx}}}
\newcommand*{\Leq}{\mathrel{\scalebig{\leq}}}
\newcommand*{\Geq}{\mathrel{\scalebig{\geq}}}
\newcommand*{\Gr}{\mathrel{\scalebig{>}}}
\newcommand*{\Lr}{\mathrel{\scalebig{<}}}
\newcommand*{\apfprox}{\mathrel{\scalebig{\apfprox}}}
\newcommand*{\Equiv}{\mathrel{\scalebig{\equiv}}}
\newcommand*{\Bequiv}{\mathrel{\scalebig{\bequiv}}}
\newcommand*{\Imp}{\mathbin{\scalebig{\imp}}}
\newcommand*{\Pmi}{\mathbin{\scalebig{\pmi}}}
\newcommand*{\blankrel}[1]{\mathrel{\phantom{#1}}}
\newcommand*{\Blank}{\blankrel{\Imp}}
\newcommand*{\BlankS}[1]{\blankrel{#1}}

% function
% with domain: \fun{local_variable <inclusion operator> domain}{body}
\newcommand*{\goesto}{\mid}
\newcommand*{\pointsto}{\rightarrow}
\newcommand*{\fun}[2]{\langle #1 \goesto #2 \rangle}
\newcommand*{\setfy}[2]{\{#1 \goesto #2\}}
\newcommand*{\cons}[2]{\setfy{#1 \goesto #2}}
\newcommand*{\dom}[1]{\mathcal{D}\left(#1\right)}
\newcommand*{\codom}[1]{\mathcal{CD}\left(#1\right)}
\newcommand*{\range}[1]{\mathcal{R}\left(#1\right)}
%\DeclareMathAlphabet\EuRoman{U}{cmtt}{m}{n}
%\SetMathAlphabet\EuRoman{bold}{U}{eur}{b}{n}
%\newcommand{\eurom}{\EuRoman}
\newcommand*{\eulerfont}{\fontfamily{ccr}\selectfont}
%\newcommand*{\f}[1]{\EuRoman #1}
%\usepackage[utopia]{mathdesign}
\newcommand*{\f}[1]{\ensuremath{\text{\eulerfont #1}}}


% MAX and MIN
%\renewcommand{\max}[1]{\f{max}\apf #1}
%\renewcommand{\min}[1]{\f{min}\apf #1}
\newcommand*{\powset}{\f{powset}}
\newcommand*{\hint}[1]{\parbox{\linewidth}{\raggedright \{#1\}}}


\newcommand*{\structure}[2]{#1[#2]}
\newcommand*{\names}[1]{\f{names}\left(#1\right)}
%======================================



%======================================
\usepackage{tikz}
\usepackage{pgfplots}
\pgfplotsset{compat=1.11}

\usetikzlibrary{calc}
%\usetikzlibrary{hobby}
\usetikzlibrary{plotmarks}
\usetikzlibrary{decorations.markings}
%======================================

%\newmdenv[linewidth=2]{notebox}
%
%\newmdenv[linecolor=red,linewidth=2]{rnotebox}

%======================================
\def\@maketitle{%
	\null
	\vskip 2em%
	\begin{center}%
		\let \footnote \thanks
		{\Large\bfseries \@title \par}%
		\vskip 1.5em%
		{\normalsize
			\lineskip .5em%
			\begin{tabular}[t]{c}%
				\@author
			\end{tabular}\par}%
		\vskip 1em%
		{\normalsize \@date}%
	\end{center}%
	\par
	\vskip 1.5em}

%============ MACROS =============
% Molar SI unit
\DeclareSIUnit\Molar{\textsc{m}}

% put something in quotation marks probably
\newcommand*{\inquotes}[1]{``#1''}
\newcommand*{\insquotes}[1]{`#1'}

% put something in marginfont size
%\renewcommand{\marginfont}{\footnotesize\sffamily}

% question and answer macros
\newcommand*{\question}{\textbf{Question:}}
\newcommand*{\answer}{\emph{Answer:}}

% matrix and vector formatting macross
\newcommand*{\mat}[1]{\ensuremath{\mathbb{#1}}}
\renewcommand{\vec}[1]{\ensuremath{\mathbf{#1}}}
\newcommand*{\vecsymb}[1]{\ensuremath{\bm{#1}}}

% probabily P
\newcommand*{\prob}{\ensuremath{\mathbb{P}}}
\newcommand*{\expe}{\ensuremath{\mathbb{E}}}
\newcommand*{\vari}{\ensuremath{\mathbb{V}}}

% new commands to make writing norms easier
\newcommand*{\normm}[2][p]{%
	\ensuremath{\norm{\mat{#2}}_{#1}}%
}

\newcommand*{\normv}[2][p]{%
	\ensuremath{\norm{\vec{#2}}_{#1}}%
}

\newcommand*{\normmv}[3][p]{%
	\ensuremath{\norm{\mat{#2}\vec{#3}}_{#1}}%
}

\newcommand*{\mycommand}[1]{\ensuremath{{#1}_{p}}}

\renewcommand{\vec}[1]{\ensuremath{\mathbf{#1}}}

\newcommand*{\normvfrac}[2][p]{%
	\ensuremath{{}_{\phantom{#1}}\norm{\vec{#2}}_{#1}}%
}

\newcommand*{\normwfrac}[2][p]{%
	\ensuremath{{}_{\!\phantom{#1}}\norm{\vec{#2}}_{#1}\!}%
}
%=================================

\newcommand*{\dimeq}{\mathbin{\underline{\Delta}}}

%=================================
% "slot" symbol for combinatorics
\newcommand*{\slot}[1]{\ensuremath{\underline{\phantom{#1}}}}

\newcommand*{\modeq}[1]{\underset{/#1}{=}}
\newcommand*{\modneq}[1]{\underset{/#1}{\neq}}
\newcommand*{\modtimes}{\otimes}
\newcommand*{\modplus}{\oplus}

\newcommand*{\modcl}[2]{[#2]_{#1}}
\newcommand*{\intsmod}[1]{\ints/#1\times\ints}
\renewcommand{\gcd}[2]{\f{gcd}\apf #1\apf #2}
\newcommand*{\lcd}[2]{\f{lcd}\apf #1\apf #2}
\newcommand*{\cd}[2]{\f{cd}\apf #1\apf #2}
\newcommand*{\divisors}[1]{\f{divisors}\apf #1}
\newcommand*{\divides}{\mid}
\newcommand*{\ndivides}{\nmid}
\newcommand*{\addgroup}[1]{(\intsmod{#1}, \modplus)}
\newcommand*{\multgroup}[1]{(\intsmod{#1}, \modtimes)}

\newcommand*{\id}{\ensuremath{\textrm{id}}}

%\newcommand*{\sgn}{\f{sgn}}
%\newcommand*{\supp}{\f{supp}}
%\newcommand*{\stab}{\f{stab}}
%\newcommand*{\gid}[1]{1_{\scalesmall{#1}}}
\newcommand*{\scaledundersetop}[3]{\mathbin{{\underset{\scaleandcenter{#1}{#2}}{#3}}}}
%\aop = "algebra operator" (for monoids, groups)
\newcommand*{\aop}[2][]{\ifthenelse{\isempty{#1}}{\scaledundersetop{0.5}{#2}{\ast}}{\scaledundersetop{#1}{#2}{\ast}}}
%\newcommand*{\aopset}[2][]{\ifthenelse{\isempty{#1}}{\scaledundersetop{0.5}{#2}{\circledast}}{\scaledundersetop{#1}{#2}{\circledast}}}
\newcommand*{\group}[2]{\mathtt{G}\left(#1, #2\right)}
\newcommand*{\grp}[1]{\mathtt{G}\left(#1, \aop{#1}\right)}
\newcommand*{\monoid}[2]{\mathtt{M}\left(#1, #2\right)}
\newcommand*{\mon}[1]{\mathtt{M}\left(#1, \aop{#1}\right)}
\newcommand*{\Img}[2]{\mathtt{Img}(#1, #2)}
%\newcommand*{\subgrp}[2]{\left(#1, \aop{#2}\right)}
\newcommand*{\inv}[2]{\overset{\scaleandcenter{0.5}{#2}}{\overline{{#1}}}}
%\newcommand*{\Hom}[2]{\f{Hom}\left(#1, #2\right)}
%\newcommand*{\GHom}[2]{\Hom{\grp{#1}}{\grp{#2}}}
%\newcommand*{\iso}{\mathrel{\simeq}}
%\newcommand*{\binrestrict}[1]{{\mid_{#1 \times #1}}}
%\newcommand*{\subgen}[1]{\langle #1 \rangle}
%\newcommand*{\normalclosure}[1]{\subgen{#1}^{\textrm{N}}}
%\newcommand*{\Ker}[1]{\operatorname{\textsc{ker}}(\f{#1})}
%\newcommand*{\PImg}[1]{\operatorname{\textsc{pimg}}(\f{#1})}
%\newcommand*{\modXG}[2]{\overset{\textrm{#1}}{\underset{/#2}{=}}}
%\newcommand*{\modLG}[1]{\modXG{\textrm{L}}{#1}}
%\newcommand*{\modRG}[1]{\modXG{\textrm{R}}{#1}}
%\newcommand*{\gindex}[2]{[#1 : #2]}
%\newcommand*{\gnormal}{\mathrel{{\lhd}}}
\newcommand*{\soln}{\texttt{S}}
%\newcommand*{\gact}[2]{\mathbin{\overset{\scalesmall{#1}}{\underset{\scalesmall{#2}}{\star}}}}
%\newcommand*{\gset}[1]{$#1$-set}
%\newcommand*{\grpact}[2]{\grp{#1} \circlearrowright #2}
%\newcommand*{\grpactset}[2]{\left\{\grpact{#1}{#2}\right\}}
%\newcommand*{\gapf}[2]{\prescript{#1}{}{\f{s}}_{#2}}
\DeclarePairedDelimiter{\newbracket}{\wr}{\wr}

%\newcommand*{\ptlnotn}[2]{\ensuremath{\left(\begin{smallmatrix}#1 \\ #2\end{smallmatrix}\right)}}
%\newcommand*{\pcynotn}[2]{\ensuremath{\left(\begin{smallmatrix}#1\end{smallmatrix}\right)}}


%====================================
%colored cancel signs

\newcommand\hcancel[2][black]{\setbox0=\hbox{$#2$}%
    \rlap{\raisebox{.45\ht0}{\textcolor{#1}{\rule{\wd0}{1pt}}}}#2} 

%=====================================
%\usepackage{MnSymbol}
\newcommand*{\ii}[1]{[#1]}
\newcommand*{\ie}[1]{[#1)}
\newcommand*{\ei}[1]{(#1]}
\newcommand*{\ee}[1]{(#1)}
\newcommand*{\il}[1]{[#1{\wr}}
\newcommand*{\el}[1]{(#1{\wr}}
\newcommand*{\eg}[1]{{\wr}#1)}
\newcommand*{\ig}[1]{{\wr}#1)}

\newcommand*{\size}[1]{\texttt{\#}#1}

\newcommand*{\graph}[1]{\ensuremath{#1}}
\newcommand*{\verts}[1]{\ensuremath{{#1}_{V}}}
\newcommand*{\edges}[1]{\ensuremath{{#1}_{E}}}
\newcommand*{\adjpart}[1]{\ensuremath{\mathcal{A}(#1)}}
\newcommand*{\adjpres}[1]{\ensuremath{\mathcal{P}(#1)}}
\newcommand*{\adjeq}{\underset{\mathcal{A}}{=}}

\newcommand*{\setsubt}{\mathbin{\scaleandcenter{0.75}{$c$}}}

\newcommand*{\udgraphs}{\mathtt{udgraphs}}
\newcommand*{\intpairs}{\mathtt{intpairs}}

\newcommand{\cartp}[2]{#1{-}{#2}}

\newcommand{\intsn}[1][\@nil]{%
    \def\tmp{#1}%
    \ifx\tmp\@nnil
        \cartp{\ints}{n}
    \else
        \cartp{\ints}{#1}
    \fi}
   
   
\newcommand*{\set}[1]{\{#1\}}